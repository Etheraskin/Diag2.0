<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Quiz Peau Responsive</title>
<style>
  :root {
    --marron: #9D8466;
    --beige: #CABFB7;
    --ivoire: #EBDED4;
    --blanc: #FFF;
    --doré: #D4AF37;
  }
  * {
    margin: 0; padding: 0; box-sizing: border-box;
  }
  body {
    font-family: 'Arial', sans-serif;
    background: var(--ivoire);
    color: #333;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
    padding: 1rem;
  }
  header {
    width: 100%;
    max-width: 620px;
    text-align: center;
    background: var(--marron);
    padding: 1rem 0;
    border-radius: 8px;
    color: var(--blanc);
    margin-bottom: 1rem;
  }
  header h1 {
    font-family: 'Georgia', serif;
    font-weight: normal;
    font-size: 2rem;
  }
  header p {
    font-style: italic;
    color: var(--doré);
    margin-top: 0.2rem;
  }
  main {
    width: 100%;
    max-width: 620px;
    background: var(--blanc);
    border-radius: 12px;
    padding: 1.5rem;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  }
  #progress-container {
    width: 100%;
    background: #ddd;
    height: 8px;
    border-radius: 6px;
    overflow: hidden;
    margin-bottom: 1rem;
  }
  #progress-bar {
    height: 8px;
    background: var(--doré);
    width: 0%;
    transition: width 0.3s ease;
  }
  .question {
    display: none;
    animation: fadeIn 0.5s ease forwards;
  }
  .question.active {
    display: block;
  }
  label {
    display: block;
    margin-bottom: 0.7rem;
    cursor: pointer;
    font-size: 1rem;
  }
  input[type=radio] {
    margin-right: 0.6rem;
  }
  button {
    margin-top: 1rem;
    padding: 0.8rem 1.5rem;
    background: var(--marron);
    color: var(--blanc);
    border: none;
    border-radius: 6px;
    font-size: 1rem;
    cursor: pointer;
    transition: background 0.3s ease;
  }
  button:hover:not(:disabled) {
    background: var(--doré);
  }
  button:disabled {
    background: #aaa;
    cursor: not-allowed;
  }
  #result {
    margin-top: 1.5rem;
    padding: 1rem;
    background: var(--beige);
    border-left: 5px solid var(--doré);
    border-radius: 8px;
    text-align: center;
    font-weight: bold;
    font-size: 1.2rem;
  }
  @keyframes fadeIn {
    from {opacity: 0;}
    to {opacity: 1;}
  }
</style>
</head>
<body>

<header>
  <h1>ETHERA</h1>
  <p>Révèle la beauté unique de ta peau.</p>
</header>

<main>
  <div id="progress-container"><div id="progress-bar"></div></div>
  <form id="quizForm">
    <!-- Questions seront insérées ici via JS -->
  </form>
  <div id="result"></div>
</main>

<script>
(() => {
  const questions = [
    "Comment ta peau se sent-elle au réveil ?",
    "Comment réagit ta peau après le nettoyage ?",
    "Comment est la texture de ta peau ?",
    "Ta peau tiraille-t-elle dans la journée ?",
    "Tes pores sont-ils visibles ?",
    "As-tu des brillances au cours de la journée ?",
    "Comment réagit ta peau face aux changements climatiques ?"
  ];

  const options = [
    {value: "seche", text: "Tiraille, zones de sécheresse"},
    {value: "grasse", text: "Brille et paraît grasse"},
    {value: "mixte", text: "Grasse zone T, sèche joues"},
    {value: "normale", text: "Équilibrée, confortable"},
    {value: "sensible", text: "Picote ou rougit facilement"}
  ];

  const descriptions = {
    seche: "Ta peau est <strong>SÉCHE</strong> : privilégie des soins riches en lipides et bois beaucoup d’eau.",
    grasse: "Ta peau est <strong>GRASSE</strong> : opte pour des textures légères, non comédogènes.",
    mixte: "Ta peau est <strong>MIXTE</strong> : zone T équilibrante + hydratation des joues.",
    normale: "Ta peau est <strong>NORMALE</strong> : routine simple et hydratation quotidienne.",
    sensible: "Ta peau est <strong>SENSIBLE</strong> : formules douces, sans parfum, apaisantes."
  };

  const form = document.getElementById("quizForm");
  const progressBar = document.getElementById("progress-bar");
  const resultDiv = document.getElementById("result");

  let currentQuestion = 0;
  const totalQuestions = questions.length;
  const answers = [];

  // Création des questions dans le formulaire
  questions.forEach((q, i) => {
    const div = document.createElement("div");
    div.classList.add("question");
    if(i === 0) div.classList.add("active");
    div.id = `question${i}`;

    const p = document.createElement("p");
    p.textContent = `${i+1}. ${q}`;
    p.style.fontWeight = "bold";
    div.appendChild(p);

    options.forEach(opt => {
      const label = document.createElement("label");
      label.innerHTML = `<input type="radio" name="q${i}" value="${opt.value}" required> ${opt.text}`;
      div.appendChild(label);
    });

    form.appendChild(div);
  });

  // Bouton suivant/terminer
  const btn = document.createElement("button");
  btn.type = "submit";
  btn.textContent = "Suivant";
  form.appendChild(btn);

  function updateProgressBar() {
    const percent = ((currentQuestion) / totalQuestions) * 100;
    progressBar.style.width = percent + "%";
  }

  function showQuestion(index) {
    document.querySelectorAll(".question").forEach((q, i) => {
      q.classList.toggle("active", i === index);
    });
    updateProgressBar();

    btn.textContent = index === totalQuestions -1 ? "Voir mes résultats" : "Suivant";
  }

  form.addEventListener("submit", e => {
    e.preventDefault();

    const selected = form.querySelector(`input[name="q${currentQuestion}"]:checked`);
    if (!selected) return;

    answers[currentQuestion] = selected.value;

    currentQuestion++;
    if(currentQuestion < totalQuestions) {
      showQuestion(currentQuestion);
    } else {
      // Fin du quiz, calcul résultat
      progressBar.style.width = "100%";
      form.style.display = "none";

      const counts = answers.reduce((acc, val) => {
        acc[val] = (acc[val] || 0) + 1;
        return acc;
      }, {});

      const dominant = Object.entries(counts).sort((a,b) => b[1] - a[1])[0][0];

      resultDiv.innerHTML = `
        <h2>Résultat : Peau ${dominant.charAt(0).toUpperCase() + dominant.slice(1)}</h2>
        <p>${descriptions[dominant]}</p>
        <button id="restartBtn">Recommencer</button>
      `;
      document.getElementById("restartBtn").addEventListener("click", () => {
        // Reset quiz
        currentQuestion = 0;
        answers.length = 0;
        resultDiv.innerHTML = "";
        form.style.display = "";
        showQuestion(0);
        updateProgressBar();
      });
    }
  });

  // Initialisation
  showQuestion(currentQuestion);
  updateProgressBar();
})();
</script>

</body>
</html>
