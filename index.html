<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ETHERA – Révèle ta peau</title>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Open+Sans&display=swap" rel="stylesheet">
  <style>
    :root {
      --marron: #9D8466;
      --beige:  #CABFB7;
      --ivoire: #EBDED4;
      --blanc:  #FFFFFF;
      --doré:   #D4AF37;
    }
    /* ----------------- reset & base ----------------- */
    *{margin:0;padding:0;box-sizing:border-box}
    body{
      font-family:'Open Sans',sans-serif;
      background:var(--ivoire);
      color:#333;
      min-height:100vh;
      display:flex;
      flex-direction:column;
      align-items:center;
    }
    h2{font-family:'Playfair Display',serif;margin-bottom:.5rem}
    header{
      width:100%;text-align:center;padding:1rem 0;
      background:var(--marron);
      color:var(--blanc);
    }
    .logo{font-size:2.5rem;font-family:'Playfair Display',serif}
    .slogan{color:var(--doré);font-style:italic;margin-top:.25rem}
    main{
      width:100%;max-width:620px;margin:2rem auto;padding:1.5rem;
      background:var(--blanc);border-radius:12px;
      box-shadow:0 4px 12px rgba(0,0,0,.1);
    }
    /* ----------------- barre de progression ----------------- */
    #progress-container{height:6px;background:#eee;border-radius:4px;overflow:hidden;margin-bottom:1.2rem}
    #progress-bar{height:100%;width:0;background:var(--doré);transition:width .3s ease}
    /* ----------------- questions ----------------- */
    .question{display:none;opacity:0;transition:opacity .4s}
    .question.current{display:block;opacity:1}
    .question label{display:block;margin:.4rem 0}
    input[type=radio]{margin-right:.5rem}
    button{
      background:var(--marron);color:var(--blanc);
      padding:.8rem 1.5rem;border:none;border-radius:6px;
      font-size:1rem;cursor:pointer;margin-top:1rem
    }
    button:hover{background:var(--doré)}
    /* ----------------- résultat ----------------- */
    #resultat{display:none;margin-top:1.5rem;padding:1.2rem;
      background:var(--beige);border-left:5px solid var(--doré);border-radius:8px;text-align:center}
    #resultat.final{display:block}
    /* ----------------- animation simple ----------------- */
    .anim{
      position:absolute;width:12px;height:12px;border-radius:50%;
      background:var(--doré);pointer-events:none;z-index:1000;
      animation:simple-burst .6s ease-out forwards
    }
    @keyframes simple-burst{
      0%{transform:scale(.5);opacity:1}
      100%{transform:scale(3);opacity:0}
    }
  </style>
</head>
<body>

<header>
  <div class="logo">ETHERA</div>
  <div class="slogan">Révèle la beauté unique de ta peau.</div>
</header>

<main>
  <div id="progress-container"><div id="progress-bar"></div></div>
  <form id="quizForm"></form>
  <div id="resultat"></div>
</main>

<script>
document.addEventListener("DOMContentLoaded", () => {
  /* ---------- données du quiz ---------- */
  const questions = [
    "Comment ta peau se sent-elle au réveil ?",
    "Comment réagit ta peau après le nettoyage ?",
    "Comment est la texture de ta peau ?",
    "Ta peau tiraille-t-elle dans la journée ?",
    "Tes pores sont-ils visibles ?",
    "As-tu des brillances au cours de la journée ?",
    "Comment réagit ta peau face aux changements climatiques ?"
  ];
  const options = {
    seche   : "Tiraille, zones de sécheresse",
    grasse  : "Brille et paraît grasse",
    mixte   : "Grasse zone T, sèche joues",
    normale : "Équilibrée, confortable",
    sensible: "Picote ou rougit facilement"
  };
  const descriptions = {
    seche   : "Ta peau est <strong>SÉCHE</strong> : privilégie des soins riches en lipides et bois beaucoup d’eau.",
    grasse  : "Ta peau est <strong>GRASSE</strong> : opte pour des textures légères, non comédogènes.",
    mixte   : "Ta peau est <strong>MIXTE</strong> : zone T équilibrante + hydratation des joues.",
    normale : "Ta peau est <strong>NORMALE</strong> : routine simple et hydratation quotidienne.",
    sensible: "Ta peau est <strong>SENSIBLE</strong> : formules douces, sans parfum, apaisantes."
  };

  /* ---------- génération du formulaire ---------- */
  const form = document.getElementById("quizForm");
  questions.forEach((q, i) => {
    const div = document.createElement("div");
    div.className = "question";
    div.id = `q${i + 1}`;
    const title = document.createElement("label");
    title.textContent = `${i + 1}. ${q}`;
    div.appendChild(title);

    for (const [value, text] of Object.entries(options)) {
      const lbl = document.createElement("label");
      lbl.innerHTML = `<input type="radio" name="q${i + 1}" value="${value}" required> ${text}`;
      div.appendChild(lbl);
    }
    form.appendChild(div);
  });
  form.appendChild(Object.assign(document.createElement("button"), {type:"submit", textContent:"Voir mes résultats"}));

  /* affichage première question */
  const total = questions.length;
  let current = 0;
  const allQ = document.querySelectorAll(".question");
  allQ[current].classList.add("current");

  /* ---------- fonction animation ---------- */
  function triggerAnim(ref){
    const box = ref.getBoundingClientRect();
    const anim = document.createElement("div");
    anim.className = "anim";
    anim.style.left = `${box.left + box.width / 2}px`;
    anim.style.top  = `${window.scrollY + box.top + box.height / 2}px`;
    document.body.appendChild(anim);
    setTimeout(() => anim.remove(), 600);
  }

  /* ---------- gestion des réponses ---------- */
  form.addEventListener("change", e => {
    if (!e.target.matches("input[type=radio]")) return;

    /* animation */
    triggerAnim(e.target.closest(".question"));

    /* mise à jour progress bar */
    current = [...allQ].findIndex(q => !q.querySelector("input:checked"));
    const answered = total - (current === -1 ? 0 : total - current);
    document.getElementById("progress-bar").style.width = `${(answered / total) * 100}%`;

    /* passage à la question suivante */
    allQ.forEach(q => q.classList.remove("current"));
    if (current !== -1) {
      allQ[current].classList.add("current");
      allQ[current].scrollIntoView({behavior:"smooth",block:"center"});
    }
  });

  /* ---------- soumission ---------- */
  form.addEventListener("submit", e => {
    e.preventDefault();
    const data = [...document.querySelectorAll("input:checked")].map(i => i.value);
    if (data.length < total) return; // sécurité

    /* barre à 100 % */
    document.getElementById("progress-bar").style.width = "100%";

    /* calcul résultat */
    const tally = data.reduce((acc,v)=>(acc[v]=(acc[v]||0)+1,acc),{});
    const dominant = Object.entries(tally).sort((a,b)=>b[1]-a[1])[0][0];

    /* affichage résultat */
    const res = document.getElementById("resultat");
    res.innerHTML = `
      <h2>Résultat : Peau ${dominant.charAt(0).toUpperCase()+dominant.slice(1)}</h2>
      <p>${descriptions[dominant]}</p>
      <button onclick="location.reload()">Recommencer</button>`;
    res.classList.add("final");
    form.style.display = "none";
  });
});
</script>
</body>
</html>
